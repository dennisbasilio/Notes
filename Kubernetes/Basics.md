# Basics
What is Kubernetes?
* Open source container orchestration tool
* Developed by Google
* Helps manage containerized applications in different deployment environments

What problems does Kubernetes solve? What are the tasks of an orchestration tool?
* Need for container orchestration tool
	* Trend from Monolith to Microservices
	* Increased usage of containers
	* Demand for a proper way of managing those hundreds of containers

What features do orchestration tools offer?
* High availability or no downtime
* Scalability or high performance
* Disaster recovery - backup and restore

# Architecture
* Node = virtual or physical machine
	* At least one master node and a few worker nodes (referred to as a node)
	* Each worker node has a kubelet process running on it
		* Makes it possible for the cluster to communicate with each other
		* Holds the containers or the actual application
		* Higher workload so are much bigger and have more resources
	* Master node components
		* API server
			* Entrypoint to K8s cluster
		* Controller Manager
			* Keeps track of whats happening in the cluster
		* Scheduler
			* Ensures Pods placement
			* Decides on which Node new Pod should be scheduled
		* etcd
			* Contains the current state of the K8s cluster
			* K8s backing store
		* Each of these are containers on the master node
		* Should have at least two master nodes in case of a failure
* All of this exists in a Virtual Network that facilitates the communicate between the different nodes and makes the it all appear as one system/cluster

# Components
* Pod
	* Smallest unit in Kubernetes
	* Abstraction over container
	* Are ephemeral and can die easily
	* Allows you to not work directly with container technology such as docker
	* Usually 1 application per pod
	* Each pod gets its own IP address
		* If pod dies, a new IP gets assigned
			* Resolved with Services
* Service
	* Permanent IP address that can be attached to a Pod
	* The lifecycle of Pod and Service is not connected
		* If Pod dies, the Service stays
	* Replicas of a Pod connect to the same service
		* Acts as a load balancer
	* Types
		* External Service
			* Opens communication to external sources
			* Sample: http://node-ip:port
		* Internal Service
			* Internal communication
		* Specified when creating a Service
* Ingress
	* Takes a request and forwards to a service
	* Routes traffic into the cluster
	* Allows for a more easily readable endpoint to hit externally i.e. my-app.com
* ConfigMap
	* External configuration of your application
		* URLs of databases, etc.
		* Prevents having to rebuild a Pod
	* Connects to a Pod
* Secret
	* Similar to ConfigMap
	* Used to store secret data such as credentials
	* Stored in Base64 encoded format
	* Needs to be encrypted with 3rd party tools on Kubernetes
	* Both Secret and ConfigMap can be used for environmental variables or as a properties file
* Volume
	* Attaches a physical storage to a pod
		* Can be located on the local machine or remotely outside of the cluster
* Deployment
	* Blueprint for Pods
	* Abstraction on top of Pods
	* Specifies how many replicas of a Pod is needed
	* Mostly work with deployments vs. pods
	* Databases cannot be replicated via Deployments
		* Has state
* StatefulSet
	* For STATEFUL apps like databases
	* Takes care of replicating pods and synchronizing reads and writes of the database
		* Prevents data inconsistencies
	* Not easy to deploy
		* Databases are often hosted outside of the Kubernetes cluster

# Configuration
* Done via the API
* Done in either YAML or JSON format
* Declaritive
	* Declare desired outcome to Kubernetes
	* Is == Should
* Controller Manager checks:
	* desired state == actual state ?
* 3 Parts of a configuration file
	* First two lines
		* apiVersion (lookup for each component)
		* kind (Deployment, Service, ...)
	* Metadata
		* Name of component
	* Spec
		* List configurations you want to apply
		* Specific to kind of deployment or service
	* Status
		* Automatically added and generated by Kubernetes
		* Always compares what is the desired vs the actual state
			* Knows that something needs to be fixed
		* Updated continuously
			* Compares status to the specification and attempts to fix any discrepancies
		* Status data retrieved from etcd
			* Holds the current status of any K8s component
* YAML Configuration Files
	* Human friendly but strict syntax (strict indentation for example)
	* Usually stored along with code (infrastructure as code) or in a git repo